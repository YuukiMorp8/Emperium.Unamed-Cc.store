<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Quasar - Evolução Estelar</title>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
        font-family: "Poppins", Arial, sans-serif;
        background: #000;
        color: #f1f1f1;
        overflow: hidden;
        height: 100vh;
        position: relative;
    }
    
    /* Container principal */
    .quasar-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
    }
    
    /* Estrela inicial (Sol) */
    .star {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        background: radial-gradient(circle, #ffeb3b, #ff9800, #ff5722);
        box-shadow: 
            0 0 100px rgba(255, 235, 59, 0.8),
            0 0 200px rgba(255, 152, 0, 0.6),
            0 0 300px rgba(255, 87, 34, 0.4);
        transition: all 20s ease;
        filter: blur(0.5px);
    }
    
    /* Quasar */
    .quasar {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        background: radial-gradient(circle, 
            #ffffff 0%, 
            #ffffcc 10%, 
            #ffaa00 20%,
            #ff6600 30%,
            #cc3300 40%,
            #990000 50%,
            #660000 60%,
            #330000 70%,
            #000000 100%);
        box-shadow: 
            0 0 300px rgba(255, 255, 200, 0.9),
            0 0 600px rgba(255, 200, 50, 0.7),
            0 0 900px rgba(255, 100, 0, 0.5);
        opacity: 0;
        transition: all 5s ease;
        filter: blur(2px);
    }
    
    /* Disco de acreção */
    .accretion-disk {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        background: 
            radial-gradient(circle, 
                transparent 30%,
                rgba(255, 200, 50, 0.1) 35%,
                rgba(255, 150, 50, 0.3) 40%,
                rgba(255, 100, 50, 0.5) 45%,
                rgba(255, 50, 50, 0.7) 50%,
                rgba(200, 50, 100, 0.6) 60%,
                rgba(150, 50, 150, 0.4) 70%,
                rgba(100, 50, 200, 0.2) 80%,
                transparent 90%
            );
        opacity: 0;
        mix-blend-mode: screen;
        transition: all 5s ease;
    }
    
    /* Jatos de energia do quasar */
    .energy-jet {
        position: absolute;
        top: 50%;
        left: 50%;
        transform-origin: center;
        background: linear-gradient(90deg, 
            transparent 0%,
            rgba(255, 255, 200, 0.1) 10%,
            rgba(255, 255, 100, 0.6) 30%,
            rgba(255, 200, 50, 0.8) 50%,
            rgba(255, 255, 100, 0.6) 70%,
            rgba(255, 255, 200, 0.1) 90%,
            transparent 100%);
        opacity: 0;
        z-index: 2;
        filter: blur(10px);
    }
    
    /* Poeira estelar */
    .stellar-dust {
        position: absolute;
        border-radius: 50%;
        background: radial-gradient(circle, #ffffff, #ffaa00, #ff6600);
        opacity: 0;
        z-index: 1;
    }
    
    /* Ondulações de energia */
    .energy-ripple {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 200, 0.3);
        opacity: 0;
        z-index: 0;
    }
    
    /* Partículas de explosão */
    .explosion-particle {
        position: absolute;
        border-radius: 50%;
        background: radial-gradient(circle, #ffffff, #ffff00, #ffaa00);
        opacity: 0;
        z-index: 2;
    }
    
    /* Informações de fase */
    .phase-info {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.7);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid rgba(255, 215, 0, 0.5);
        font-size: 18px;
        z-index: 10;
        max-width: 300px;
    }
    
    /* Controles */
    .controls {
        position: absolute;
        bottom: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.7);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid rgba(255, 215, 0, 0.5);
        z-index: 10;
    }
    
    button {
        background: linear-gradient(135deg, #d4af37, #8a6f2e);
        border: none;
        border-radius: 8px;
        color: #111;
        font-weight: bold;
        padding: 10px 15px;
        margin: 5px;
        cursor: pointer;
        transition: 0.3s;
    }
    
    button:hover {
        background: linear-gradient(135deg, #f5d67b, #b99232);
        transform: scale(1.05);
    }
    
    /* Animações */
    @keyframes rotateSlow {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    @keyframes rotateFast {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(720deg); }
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
    }
    
    @keyframes ripple {
        0% { 
            transform: translate(-50%, -50%) scale(0.5); 
            opacity: 0.8;
            border-width: 2px;
        }
        100% { 
            transform: translate(-50%, -50%) scale(3); 
            opacity: 0;
            border-width: 1px;
        }
    }
</style>
</head>

<body>
    <div class="quasar-container" id="quasarContainer">
        <!-- Elementos serão criados dinamicamente via JavaScript -->
    </div>
    
    <div class="phase-info" id="phaseInfo">
        <h3>Fase: Estrela Estável</h3>
        <p>Uma estrela como o Sol em sua fase principal de sequência.</p>
    </div>
    
    <div class="controls">
        <button id="restartBtn">Reiniciar Simulação</button>
        <button id="pauseBtn">Pausar/Continuar</button>
    </div>

<script>
// Elementos principais
const container = document.getElementById('quasarContainer');
const phaseInfo = document.getElementById('phaseInfo');
const restartBtn = document.getElementById('restartBtn');
const pauseBtn = document.getElementById('pauseBtn');

// Variáveis de estado
let currentPhase = 'star_stable';
let isPaused = false;
let phaseStartTime = Date.now();
let particles = [];
let dustParticles = [];
let energyRipples = [];
let explosionParticles = [];
let energyJets = [];

// Inicialização
function initializeSimulation() {
    // Limpar elementos existentes
    container.innerHTML = '';
    particles = [];
    dustParticles = [];
    energyRipples = [];
    explosionParticles = [];
    energyJets = [];
    
    // Criar estrela inicial (Sol)
    const star = document.createElement('div');
    star.className = 'star';
    star.id = 'star';
    star.style.width = '200px';
    star.style.height = '200px';
    star.style.animation = 'pulse 10s infinite alternate';
    container.appendChild(star);
    
    // Iniciar primeira fase
    currentPhase = 'star_stable';
    phaseStartTime = Date.now();
    updatePhaseInfo('Estrela Estável', 'Uma estrela como o Sol em sua fase principal de sequência.');
    
    // Transição para próxima fase após 20 segundos
    setTimeout(() => {
        if (!isPaused) starCompressionPhase();
    }, 20000);
}

// Fase 1: Estrela Estável (20 segundos)
function starStablePhase() {
    // Já está implementada na inicialização
}

// Fase 2: Compressão da Estrela (5 segundos)
function starCompressionPhase() {
    currentPhase = 'star_compression';
    phaseStartTime = Date.now();
    
    updatePhaseInfo('Compressão Estelar', 'A estrela começa a colapsar sob sua própria gravidade.');
    
    const star = document.getElementById('star');
    
    // Comprimir a estrela
    const compressInterval = setInterval(() => {
        if (isPaused) return;
        
        const currentWidth = parseInt(star.style.width);
        const currentHeight = parseInt(star.style.height);
        
        if (currentWidth > 50) {
            star.style.width = (currentWidth - 15) + 'px';
            star.style.height = (currentHeight - 15) + 'px';
            
            // Aumentar intensidade da cor
            const progress = 1 - (currentWidth / 200);
            star.style.background = `radial-gradient(circle, 
                #ffeb3b, 
                #ff9800 ${10 + progress * 40}%, 
                #ff5722 ${30 + progress * 50}%, 
                #d32f2f ${60 + progress * 30}%)`;
            
            // Aumentar brilho
            star.style.boxShadow = 
                `0 0 ${50 + progress * 100}px rgba(255, 235, 59, 0.8),
                 0 0 ${100 + progress * 200}px rgba(255, 152, 0, 0.6),
                 0 0 ${150 + progress * 300}px rgba(255, 87, 34, 0.4)`;
        } else {
            clearInterval(compressInterval);
            starExplosionPhase();
        }
    }, 100);
}

// Fase 3: Explosão e Poeira (10 segundos)
function starExplosionPhase() {
    currentPhase = 'star_explosion';
    phaseStartTime = Date.now();
    
    updatePhaseInfo('Explosão Estelar', 'A estrela explode, expelindo poeira e matéria para o espaço.');
    
    const star = document.getElementById('star');
    
    // Esconder estrela
    star.style.opacity = '0';
    
    // Criar partículas de explosão
    for (let i = 0; i < 200; i++) {
        createExplosionParticle();
    }
    
    // Criar poeira estelar
    const dustInterval = setInterval(() => {
        if (isPaused) return;
        
        for (let i = 0; i < 5; i++) {
            createDustParticle();
        }
        
        // Parar após 10 segundos
        if (Date.now() - phaseStartTime > 10000) {
            clearInterval(dustInterval);
            quasarFormationPhase();
        }
    }, 500);
}

// Fase 4: Formação do Quasar (15 segundos)
function quasarFormationPhase() {
    currentPhase = 'quasar_formation';
    phaseStartTime = Date.now();
    
    updatePhaseInfo('Formação do Quasar', 'O núcleo colapsado forma um buraco negro supermassivo, criando um quasar.');
    
    // Criar quasar
    const quasar = document.createElement('div');
    quasar.className = 'quasar';
    quasar.id = 'quasar';
    quasar.style.width = '100px';
    quasar.style.height = '100px';
    quasar.style.opacity = '0';
    container.appendChild(quasar);
    
    // Criar disco de acreção
    const accretionDisk = document.createElement('div');
    accretionDisk.className = 'accretion-disk';
    accretionDisk.id = 'accretionDisk';
    accretionDisk.style.width = '400px';
    accretionDisk.style.height = '400px';
    accretionDisk.style.opacity = '0';
    container.appendChild(accretionDisk);
    
    // Animação de aparecimento
    setTimeout(() => {
        if (isPaused) return;
        
        quasar.style.opacity = '1';
        accretionDisk.style.opacity = '0.8';
        accretionDisk.style.animation = 'rotateSlow 30s linear infinite';
        
        // Expandir quasar
        quasar.style.width = '150px';
        quasar.style.height = '150px';
        
        // Expandir disco de acreção
        accretionDisk.style.width = '600px';
        accretionDisk.style.height = '600px';
        
        // Iniciar jatos de energia após 5 segundos
        setTimeout(() => {
            if (isPaused) return;
            quasarActivePhase();
        }, 5000);
    }, 1000);
}

// Fase 5: Quasar Ativo (contínua)
function quasarActivePhase() {
    currentPhase = 'quasar_active';
    phaseStartTime = Date.now();
    
    updatePhaseInfo('Quasar Ativo', 'O quasar emite jatos intensos de energia e radiação.');
    
    // Criar jatos de energia
    const jetInterval = setInterval(() => {
        if (isPaused) return;
        
        createEnergyJet(0); // Jato para cima
        createEnergyJet(Math.PI); // Jato para baixo
        
        // Criar ondulações de energia ocasionais
        if (Math.random() > 0.7) {
            createEnergyRipple();
        }
        
        // Criar poeira ocasional
        if (Math.random() > 0.8) {
            createDustParticle();
        }
    }, 1000);
    
    // Atualizar informações a cada 10 segundos
    const infoInterval = setInterval(() => {
        if (isPaused) return;
        
        const activeTime = Math.floor((Date.now() - phaseStartTime) / 1000);
        updatePhaseInfo(
            'Quasar Ativo', 
            `O quasar continua emitindo energia intensa há ${activeTime} segundos.`
        );
    }, 10000);
}

// Funções auxiliares para criar elementos

function createExplosionParticle() {
    const particle = document.createElement('div');
    particle.className = 'explosion-particle';
    
    const size = Math.random() * 20 + 5;
    particle.style.width = size + 'px';
    particle.style.height = size + 'px';
    particle.style.left = '50%';
    particle.style.top = '50%';
    
    container.appendChild(particle);
    explosionParticles.push(particle);
    
    const angle = Math.random() * Math.PI * 2;
    const distance = Math.random() * 500 + 200;
    const duration = Math.random() * 2000 + 1000;
    
    particle.animate([
        { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
        { opacity: 0, transform: `translate(calc(-50% + ${Math.cos(angle) * distance}px), calc(-50% + ${Math.sin(angle) * distance}px)) scale(0.1)` }
    ], {
        duration: duration,
        easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
    });
    
    setTimeout(() => {
        if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
            explosionParticles = explosionParticles.filter(p => p !== particle);
        }
    }, duration);
}

function createDustParticle() {
    const dust = document.createElement('div');
    dust.className = 'stellar-dust';
    
    const size = Math.random() * 8 + 2;
    dust.style.width = size + 'px';
    dust.style.height = size + 'px';
    
    // Posição inicial aleatória próxima ao centro
    const startAngle = Math.random() * Math.PI * 2;
    const startDistance = Math.random() * 100 + 50;
    const startX = window.innerWidth/2 + Math.cos(startAngle) * startDistance;
    const startY = window.innerHeight/2 + Math.sin(startAngle) * startDistance;
    
    dust.style.left = startX + 'px';
    dust.style.top = startY + 'px';
    dust.style.opacity = '0.7';
    
    container.appendChild(dust);
    dustParticles.push(dust);
    
    // Ângulo e distância final
    const finalAngle = Math.random() * Math.PI * 2;
    const finalDistance = Math.random() * 600 + 300;
    const finalX = window.innerWidth/2 + Math.cos(finalAngle) * finalDistance;
    const finalY = window.innerHeight/2 + Math.sin(finalAngle) * finalDistance;
    
    const duration = Math.random() * 5000 + 3000;
    
    dust.animate([
        { opacity: 0.7, transform: 'scale(1)' },
        { opacity: 0, transform: `translate(${finalX - startX}px, ${finalY - startY}px) scale(0.5)` }
    ], {
        duration: duration,
        easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
    });
    
    setTimeout(() => {
        if (dust.parentNode) {
            dust.parentNode.removeChild(dust);
            dustParticles = dustParticles.filter(d => d !== dust);
        }
    }, duration);
}

function createEnergyJet(angle) {
    const jet = document.createElement('div');
    jet.className = 'energy-jet';
    
    const length = Math.random() * 800 + 400;
    const width = Math.random() * 60 + 30;
    
    jet.style.width = length + 'px';
    jet.style.height = width + 'px';
    jet.style.opacity = '0.8';
    jet.style.transform = `translate(-50%, -50%) rotate(${angle}rad)`;
    
    container.appendChild(jet);
    energyJets.push(jet);
    
    jet.animate([
        { opacity: 0, transform: `translate(-50%, -50%) rotate(${angle}rad) scaleX(0)` },
        { opacity: 0.8, transform: `translate(-50%, -50%) rotate(${angle}rad) scaleX(1)` },
        { opacity: 0.8, transform: `translate(-50%, -50%) rotate(${angle}rad) scaleX(1)` },
        { opacity: 0, transform: `translate(-50%, -50%) rotate(${angle}rad) scaleX(0)` }
    ], {
        duration: 3000,
        easing: 'ease-in-out'
    });
    
    setTimeout(() => {
        if (jet.parentNode) {
            jet.parentNode.removeChild(jet);
            energyJets = energyJets.filter(j => j !== jet);
        }
    }, 3000);
}

function createEnergyRipple() {
    const ripple = document.createElement('div');
    ripple.className = 'energy-ripple';
    
    const size = Math.random() * 200 + 100;
    ripple.style.width = size + 'px';
    ripple.style.height = size + 'px';
    ripple.style.opacity = '0.7';
    
    container.appendChild(ripple);
    energyRipples.push(ripple);
    
    ripple.animate([
        { 
            transform: 'translate(-50%, -50%) scale(0.5)',
            opacity: 0.7,
            borderWidth: '2px'
        },
        { 
            transform: 'translate(-50%, -50%) scale(3)',
            opacity: 0,
            borderWidth: '1px'
        }
    ], {
        duration: 4000,
        easing: 'ease-out'
    });
    
    setTimeout(() => {
        if (ripple.parentNode) {
            ripple.parentNode.removeChild(ripple);
            energyRipples = energyRipples.filter(r => r !== ripple);
        }
    }, 4000);
}

function updatePhaseInfo(title, description) {
    phaseInfo.innerHTML = `
        <h3>Fase: ${title}</h3>
        <p>${description}</p>
    `;
}

// Event listeners
restartBtn.addEventListener('click', () => {
    initializeSimulation();
});

pauseBtn.addEventListener('click', () => {
    isPaused = !isPaused;
    pauseBtn.textContent = isPaused ? 'Continuar' : 'Pausar';
});

// Iniciar simulação
initializeSimulation();
</script>
</body>
</html>